specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: CharacterSheetsFactory
    network: goerli
    source:
      address: "0x453C82CF49eA5eAa9535b19F858025416be98F79"
      abi: CharacterSheetsFactory
      startBlock: 9688594
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Global
        - Game
      abis:
        - name: CharacterSheetsFactory
          file: ./abis/CharacterSheetsFactory.json
        - name: CharacterSheetsImplementation
          file: ./abis/CharacterSheetsImplementation.json
        - name: ClassesImplementation
          file: ./abis/ClassesImplementation.json
        - name: ExperienceAndItemsImplementation
          file: ./abis/ExperienceAndItemsImplementation.json
      eventHandlers:
        - event: CharacterSheetsCreated(address,address,address,address)
          handler: handleCharacterSheetsCreated
        - event: CharacterSheetsUpdated(address)
          handler: handleCharacterSheetsUpdated
        - event: ClassesImplementationUpdated(address)
          handler: handleClassesImplementationUpdated
        - event: ERC6551AccountImplementationUpdated(address)
          handler: handleERC6551AccountImplementationUpdated
        - event: ExperienceUpdated(address)
          handler: handleExperienceUpdated
        - event: Initialized(uint64)
          handler: handleInitialized
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: RegistryUpdated(address)
          handler: handleRegistryUpdated
      file: ./src/character-sheets-factory.ts
templates:
  - kind: ethereum
    name: CharacterSheetsImplementation
    network: goerli
    source:
      abi: CharacterSheetsImplementation
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Game
        - Character
        - Item
        - Class
      abis:
        - name: CharacterSheetsFactory
          file: ./abis/CharacterSheetsFactory.json
        - name: CharacterSheetsImplementation
          file: ./abis/CharacterSheetsImplementation.json
        - name: ClassesImplementation
          file: ./abis/ClassesImplementation.json
        - name: ExperienceAndItemsImplementation
          file: ./abis/ExperienceAndItemsImplementation.json
      eventHandlers:
        - event: CharacterUpdated(uint256,string,string)
          handler: handleCharacterUpdated
        - event: ClassEquipped(uint256,uint256)
          handler: handleClassEquipped
        - event: ItemEquipped(uint256,uint256)
          handler: handleItemEquipped
        - event: ClassUnequipped(uint256,uint256)
          handler: handleClassUnequipped
        - event: ItemUnequipped(uint256,uint256)
          handler: handleItemUnequipped
        - event: ExperienceUpdated(address)
          handler: handleExperienceUpdated
        - event: MetadataUpdate(uint256)
          handler: handleMetadataUpdate
        - event: MetadataURIUpdated(string,string)
          handler: handleMetadataURIUpdated
        - event: NewCharacterSheetRolled(address,address,uint256)
          handler: handleNewCharacterSheetRolled
        - event: PlayerRemoved(uint256)
          handler: handlePlayerRemoved
        - event: PlayerJailed(address,bool)
          handler: handlePlayerJailed
        - event: RoleGranted(indexed bytes32,indexed address,indexed address)
          handler: handleRoleGranted
        - event: RoleRevoked(indexed bytes32,indexed address,indexed address)
          handler: handleRoleRevoked
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/character-sheets-implementation.ts
  - kind: ethereum
    name: ExperienceAndItemsImplementation
    network: goerli
    source:
      abi: ExperienceAndItemsImplementation
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Character
        - Item
        - Class
      abis:
        - name: CharacterSheetsFactory
          file: ./abis/CharacterSheetsFactory.json
        - name: CharacterSheetsImplementation
          file: ./abis/CharacterSheetsImplementation.json
        - name: ClassesImplementation
          file: ./abis/ClassesImplementation.json
        - name: ExperienceAndItemsImplementation
          file: ./abis/ExperienceAndItemsImplementation.json
      eventHandlers:
        - event: ItemTransfered(address,uint256,uint256)
          handler: handleItemTransfered
        - event: ItemClaimableUpdated(uint256,bytes32)
          handler: handleItemClaimableUpdated
        - event: NewItemTypeCreated(uint256,string)
          handler: handleNewItemTypeCreated
        - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleTransferBatch
        - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleTransferSingle
        - event: URI(string,indexed uint256)
          handler: handleURI
      file: ./src/experience-and-items-implementation.ts
  - kind: ethereum
    name: ClassesImplementation
    network: goerli
    source:
      abi: ClassesImplementation
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Character
        - Item
        - Class
      abis:
        - name: CharacterSheetsFactory
          file: ./abis/CharacterSheetsFactory.json
        - name: CharacterSheetsImplementation
          file: ./abis/CharacterSheetsImplementation.json
        - name: ClassesImplementation
          file: ./abis/ClassesImplementation.json
        - name: ExperienceAndItemsImplementation
          file: ./abis/ExperienceAndItemsImplementation.json
      eventHandlers:
        - event: ClassAssigned(uint256,uint256)
          handler: handleClassAssigned
        - event: ClassRevoked(uint256,uint256)
          handler: handleClassRevoked
        - event: NewClassCreated(uint256,string)
          handler: handleNewClassCreated
        - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleTransferBatch
        - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleTransferSingle
        - event: URI(string,indexed uint256)
          handler: handleURI
      file: ./src/classes-implementation.ts
